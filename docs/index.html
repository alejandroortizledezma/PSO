---

title: Optimización de Partículas en Parvada, Particle Swarm Optimitation (PSO) 

keywords: fastai
sidebar: home_sidebar

summary: "Es una herística para optimizar ecuaciones no lineales que simula el vuelo de una parvada; la cual sigue a un lider que en la heurística es la partícula o pajaro que ha obtenido hasta ese momento la menor evaluación en la función objetivo. Las demás partículas se mueven desde su posición con cierto peso entre su propia mejor evaluación y la del lider, esos pesos pueden ajustarse."
description: "Es una herística para optimizar ecuaciones no lineales que simula el vuelo de una parvada; la cual sigue a un lider que en la heurística es la partícula o pajaro que ha obtenido hasta ese momento la menor evaluación en la función objetivo. Las demás partículas se mueven desde su posición con cierto peso entre su propia mejor evaluación y la del lider, esos pesos pueden ajustarse."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    {% raw %}
        
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This file will become your README and also the index of your documentation.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install PSO</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Importamos las librerias a utilizar</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">reduce</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="k">import</span> <span class="n">uniform</span><span class="p">,</span> <span class="n">seed</span>
<span class="kn">from</span> <span class="nn">statistics</span> <span class="k">import</span> <span class="n">mean</span><span class="p">,</span> <span class="n">pstdev</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>La clase Ave va a ser cada una de nuestras partículas.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Ave</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">posicion</span><span class="p">,</span> <span class="n">mejorPosicion</span><span class="p">,</span> <span class="n">velocidad</span><span class="p">,</span> <span class="n">aptitud</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">posicion</span><span class="o">=</span> <span class="n">posicion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mejorPosicion</span><span class="o">=</span> <span class="n">mejorPosicion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span><span class="o">=</span> <span class="n">velocidad</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aptitud</span><span class="o">=</span> <span class="n">aptitud</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">posicion</span>
    <span class="k">def</span> <span class="nf">p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mejorPosicion</span>
    <span class="k">def</span> <span class="nf">v</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">velocidad</span>
    <span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">aptitud</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Las funciones g6 y g13, son las funciones a optimizar, fi6 y fi13 son sus respectivas penalizaciones que utilizamos en jerarquización estocástica</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">g6</span><span class="p">(</span><span class="n">xs</span><span class="p">):</span>
    <span class="n">x1</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">x2</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span> <span class="o">+</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="mi">20</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span>
    <span class="c1">#sujeto a </span>
<span class="k">def</span> <span class="nf">fi6</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="n">x1</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">x2</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">penalizacion</span><span class="o">=</span> <span class="mi">0</span>
    <span class="n">g1</span><span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">100</span> <span class="c1">#&lt;= 0</span>
    <span class="k">if</span> <span class="n">g1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">penalizacion</span> <span class="o">+=</span> <span class="n">g1</span>
        <span class="k">if</span> <span class="n">verbose</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Penalizacion g1: &#39;</span><span class="p">,</span><span class="n">g1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">verbose</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Penalizacion g1: 0&#39;</span><span class="p">)</span>
    <span class="n">g2</span><span class="o">=</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="mi">6</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span><span class="mf">82.81</span> <span class="c1">#&lt;= 0</span>
    <span class="k">if</span> <span class="n">g2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">penalizacion</span> <span class="o">+=</span> <span class="n">g2</span>
        <span class="k">if</span> <span class="n">verbose</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Penalizacion g2: &#39;</span><span class="p">,</span><span class="n">g2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">verbose</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Penalizacion g2: 0&#39;</span><span class="p">)</span>
    <span class="c1"># donde</span>
    <span class="k">if</span> <span class="n">x1</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="p">:</span>
        <span class="n">penalizacion</span><span class="o">+=</span> <span class="mi">13</span> <span class="o">-</span> <span class="n">x1</span>
    <span class="k">if</span> <span class="n">x1</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="n">penalizacion</span><span class="o">+=</span> <span class="n">x1</span> <span class="o">-</span> <span class="mi">100</span>
    <span class="k">if</span> <span class="n">x2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">penalizacion</span><span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x2</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="n">penalizacion</span><span class="o">+=</span> <span class="n">x2</span> <span class="o">-</span> <span class="mi">100</span>
    <span class="c1">#13 &lt;= x1 &lt;= 100</span>
    <span class="c1">#0 &lt;= x2 &lt;= 100</span>
    <span class="k">return</span> <span class="n">penalizacion</span>
<span class="k">def</span> <span class="nf">g13</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">n</span><span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">e</span> <span class="o">**</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">n</span>
    <span class="c1">#sujeto a:</span>
<span class="k">def</span> <span class="nf">fi13</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="n">x1</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">x2</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">x3</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">x4</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">x5</span><span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">penalizacion</span><span class="o">=</span> <span class="mi">0</span>
    <span class="n">h1</span><span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x2</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x3</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x4</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x5</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="c1">#== 0</span>
    <span class="n">penalizacion</span> <span class="o">+=</span> <span class="n">h1</span>
    <span class="n">h2</span><span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x2</span> <span class="o">*</span> <span class="n">x3</span> <span class="o">-</span> <span class="mi">5</span><span class="o">*</span><span class="n">x4</span> <span class="o">*</span> <span class="n">x5</span><span class="p">)</span> <span class="c1">#== 0</span>
    <span class="n">penalizacion</span> <span class="o">+=</span> <span class="n">h2</span>
    <span class="n">h3</span><span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span><span class="o">**</span><span class="mi">3</span> <span class="o">+</span> <span class="n">x2</span><span class="o">**</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">#== 0</span>
    <span class="n">penalizacion</span> <span class="o">+=</span> <span class="n">h3</span>
    <span class="k">if</span> <span class="n">verbose</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;h1: &#39;</span><span class="p">,</span><span class="n">h1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;h2: &#39;</span><span class="p">,</span><span class="n">h2</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;h3: &#39;</span><span class="p">,</span><span class="n">h3</span><span class="p">)</span>
    <span class="c1"># donde</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">2.3</span><span class="p">:</span>
            <span class="n">penalizacion</span><span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">2.3</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">2.3</span><span class="p">:</span>
            <span class="n">penalizacion</span><span class="o">+=</span> <span class="n">x</span> <span class="o">-</span> <span class="mf">2.3</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">[</span><span class="mi">3</span><span class="p">:]:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">3.2</span><span class="p">:</span>
            <span class="n">penalizacion</span><span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">3.2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">3.2</span><span class="p">:</span>
            <span class="n">penalizacion</span><span class="o">+=</span> <span class="n">x</span> <span class="o">-</span> <span class="mf">3.2</span>
    <span class="c1">#-2.3 &lt;= xi &lt;= 2.3 (i= 1, 2)</span>
    <span class="c1">#-3.2 &lt;= xi &lt;= 3.2 (i= 3, 4, 5)</span>
    <span class="k">return</span> <span class="n">penalizacion</span>
<span class="k">def</span> <span class="nf">jerarquizacionEstocastica</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">mejor</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">I</span><span class="p">)):</span>
        <span class="n">u</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fi</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">fi</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">mejor</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">P</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">f</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">mejor</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
                <span class="n">mejor</span><span class="o">=</span> <span class="n">i</span>
            <span class="k">elif</span> <span class="n">fi</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">mejor</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">fi</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
                    <span class="n">mejor</span><span class="o">=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">mejor</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">P</span> <span class="o">=</span> <span class="o">.</span><span class="mi">45</span>
<span class="n">maximoGeneraciones</span><span class="o">=</span><span class="mi">100</span>
<span class="n">tamañoPoblacion</span><span class="o">=</span><span class="mi">200</span>
<span class="n">w</span><span class="o">=.</span><span class="mi">8</span>
<span class="n">c1</span><span class="o">=.</span><span class="mi">4</span>
<span class="n">c2</span><span class="o">=.</span><span class="mi">6</span>
<span class="n">N</span><span class="o">=</span> <span class="n">tamañoPoblacion</span>
<span class="n">l</span><span class="o">=</span><span class="n">N</span>
<span class="n">funcion</span><span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Favor de ingresar la función a optimizar</span><span class="se">\n\t</span><span class="s2">g6</span><span class="se">\t</span><span class="s2">g13</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">funcion</span><span class="o">=</span> <span class="n">funcion</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Función a optimizar: &#39;</span><span class="p">,</span> <span class="n">funcion</span><span class="p">)</span>
<span class="n">fs</span><span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">31</span><span class="p">):</span>
    <span class="n">seed</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;semilla: &#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">funcion</span> <span class="o">==</span> <span class="s2">&quot;g6&quot;</span><span class="p">:</span>
        <span class="n">f</span><span class="o">=</span> <span class="n">g6</span>
        <span class="n">fi</span><span class="o">=</span> <span class="n">fi6</span>
        <span class="n">I</span><span class="o">=</span> <span class="p">[]</span>
        <span class="n">mejorGlobal</span><span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tamañoPoblacion</span><span class="p">):</span>
            <span class="n">x1</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
            <span class="n">x2</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
            <span class="n">individuo</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">])</span>
            <span class="n">fAve</span><span class="o">=</span><span class="n">f</span><span class="p">(</span><span class="n">individuo</span><span class="p">)</span>
            <span class="n">fiAve</span><span class="o">=</span> <span class="n">fi</span><span class="p">(</span><span class="n">individuo</span><span class="p">)</span>
            <span class="n">aptitud</span><span class="o">=</span> <span class="n">fAve</span> <span class="o">+</span> <span class="n">fiAve</span>
            <span class="n">ave</span><span class="o">=</span> <span class="n">Ave</span><span class="p">(</span><span class="n">individuo</span><span class="p">,</span><span class="n">individuo</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">fAve</span><span class="p">,</span> <span class="n">fiAve</span><span class="p">])</span>
            <span class="n">I</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ave</span><span class="p">)</span>
            <span class="n">u</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">fiAve</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">P</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fAve</span><span class="p">:</span>
                    <span class="n">mejorGlobal</span><span class="o">=</span> <span class="n">i</span>
                <span class="k">elif</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fiAve</span><span class="p">:</span>
                    <span class="n">mejorGlobal</span><span class="o">=</span> <span class="n">i</span>
    <span class="k">if</span> <span class="n">funcion</span> <span class="o">==</span> <span class="s2">&quot;g13&quot;</span><span class="p">:</span>
        <span class="n">f</span><span class="o">=</span> <span class="n">g13</span>
        <span class="n">fi</span><span class="o">=</span> <span class="n">fi13</span>
        <span class="n">I</span><span class="o">=</span> <span class="p">[]</span>
        <span class="n">mejorGlobal</span><span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tamañoPoblacion</span><span class="p">):</span>
            <span class="n">x1</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">2.3</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">)</span>
            <span class="n">x2</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">2.3</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">)</span>
            <span class="n">x3</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">3.2</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">)</span>
            <span class="n">x4</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">3.2</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">)</span>
            <span class="n">x5</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">3.2</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">)</span>
            <span class="n">individuo</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">x4</span><span class="p">,</span> <span class="n">x5</span><span class="p">])</span>
            <span class="n">fAve</span><span class="o">=</span><span class="n">f</span><span class="p">(</span><span class="n">individuo</span><span class="p">)</span>
            <span class="n">fiAve</span><span class="o">=</span> <span class="n">fi</span><span class="p">(</span><span class="n">individuo</span><span class="p">)</span>
            <span class="n">aptitud</span><span class="o">=</span> <span class="n">fAve</span> <span class="o">+</span> <span class="n">fiAve</span>
            <span class="n">ave</span><span class="o">=</span> <span class="n">Ave</span><span class="p">(</span><span class="n">individuo</span><span class="p">,</span><span class="n">individuo</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">fAve</span><span class="p">,</span> <span class="n">fiAve</span><span class="p">])</span>
            <span class="n">I</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ave</span><span class="p">)</span>
            <span class="n">u</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">fiAve</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">P</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fAve</span><span class="p">:</span>
                    <span class="n">mejorGlobal</span><span class="o">=</span> <span class="n">i</span>
                <span class="k">elif</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fiAve</span><span class="p">:</span>
                    <span class="n">mejorGlobal</span><span class="o">=</span> <span class="n">i</span>
    <span class="n">generacion</span><span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">generacion</span> <span class="o">&lt;</span> <span class="n">maximoGeneraciones</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tamañoPoblacion</span><span class="p">):</span>
            <span class="n">nuevaVelocidad</span><span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">v</span><span class="p">()</span> <span class="o">+</span> <span class="n">c1</span> <span class="o">*</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">p</span><span class="p">()</span> <span class="o">-</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">())</span> <span class="o">+</span> <span class="n">c2</span> <span class="o">*</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">p</span><span class="p">()</span> <span class="o">-</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">())</span>
            <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">velocidad</span><span class="o">=</span> <span class="n">nuevaVelocidad</span>
            <span class="n">nuevaPosicion</span><span class="o">=</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="n">nuevaVelocidad</span>
            <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">posicion</span><span class="o">=</span> <span class="n">nuevaPosicion</span>
            <span class="n">fAve</span><span class="o">=</span><span class="n">f</span><span class="p">(</span><span class="n">nuevaPosicion</span><span class="p">)</span>
            <span class="n">fiAve</span><span class="o">=</span> <span class="n">fi</span><span class="p">(</span><span class="n">nuevaPosicion</span><span class="p">)</span>
            <span class="n">nuevaAptitud</span><span class="o">=</span> <span class="n">fAve</span> <span class="o">+</span> <span class="n">fiAve</span>
            <span class="k">if</span> <span class="n">nuevaAptitud</span> <span class="o">&lt;</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">mejorPosicion</span><span class="o">=</span> <span class="n">nuevaPosicion</span>
            <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">aptitud</span><span class="o">=</span> <span class="p">[</span><span class="n">fAve</span><span class="p">,</span> <span class="n">fiAve</span><span class="p">]</span>
            <span class="n">u</span><span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">fiAve</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="n">u</span> <span class="o">&lt;</span> <span class="n">P</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fAve</span><span class="p">:</span>
                    <span class="n">mejorGlobal</span><span class="o">=</span> <span class="n">i</span>
                <span class="k">elif</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fiAve</span><span class="p">:</span>
                    <span class="n">mejorGlobal</span><span class="o">=</span> <span class="n">i</span>
        <span class="n">generacion</span><span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;X*: &#39;</span><span class="p">,</span> <span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">p</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(x*): &#39;</span><span class="p">,</span><span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Penalizacion total: &#39;</span><span class="p">,</span> <span class="n">fi</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">p</span><span class="p">(),</span> <span class="kc">True</span><span class="p">))</span>
    <span class="n">fs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">I</span><span class="p">[</span><span class="n">mejorGlobal</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Media: </span><span class="si">%.3f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">mean</span><span class="p">(</span><span class="n">fs</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Desviación Estandar: </span><span class="si">%.3f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pstdev</span><span class="p">(</span><span class="n">fs</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mejor: </span><span class="si">%.3f</span><span class="s1"> </span><span class="se">\t</span><span class="s1"> Peor: </span><span class="si">%.3f</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">fs</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">fs</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Función a optimizar:  g13
semilla:  0
X*:  [-1.62881182  1.54090847 -1.61726013 -0.38987029  1.55585979]
f(x*):  0.019099561690441948
h1:  0.21565574405502375
h2:  0.5408676970047654
h3:  0.3374481502394593
Penalizacion total:  1.0939715912992485
semilla:  1
X*:  [-0.72126247 -0.94886463 -2.69053015  0.45652575  1.07686739]
f(x*):  0.37956423631552766
h1:  0.027575271397395795
h2:  0.09486044660794635
h3:  0.22951949367491897
Penalizacion total:  0.7424853650757082
semilla:  2
X*:  [-1.77904866  1.66391382  1.70725921 -0.81850667 -0.70029807]
f(x*):  0.05519782404676464
h1:  0.008727915274318931
h2:  0.025260992471468402
h3:  0.023987103693055012
Penalizacion total:  0.057976011438842345
semilla:  3
X*:  [-1.66706579  1.53688884 -1.91333639 -0.69348224  0.85256515]
f(x*):  0.05511459299582984
h1:  0.0097767233370476
h2:  0.015608585639842243
h3:  0.0027830225335989667
Penalizacion total:  0.02816833151048881
semilla:  4
X*:  [-1.72615668  1.60936607 -1.83094781  0.67989719 -0.85339143]
f(x*):  0.04395151295388568
h1:  0.11258303279366544
h2:  0.04557309295386425
h3:  0.02506777302461405
Penalizacion total:  0.18322389877214373
semilla:  5
X*:  [-1.75708524  1.66621762 -1.63349532 -1.09048335  0.47744374]
f(x*):  0.08291740748210571
h1:  0.050956864789794665
h2:  0.11853642701265965
h3:  0.20115403680087152
Penalizacion total:  0.37064732860332583
semilla:  6
X*:  [-0.81970052 -0.90977194  2.58671132 -1.28764337  0.39655262]
f(x*):  0.2936022658770396
h1:  0.005948785555418112
h2:  0.19977438595735153
h3:  0.30376867136331454
Penalizacion total:  0.7962031584207514
semilla:  7
X*:  [-1.49217106  1.34244112  1.96898211 -0.39794423 -1.90520153]
f(x*):  0.05027096808716506
h1:  1.6937656728097341
h2:  1.1475772177430805
h3:  0.09684783534324248
Penalizacion total:  2.938190725896057
semilla:  8
X*:  [-1.73526244  1.59874731 -1.56271423 -1.43855251  0.4006868 ]
f(x*):  0.08217229887403019
h1:  0.23918768749275365
h2:  0.38365983163699324
h3:  0.13872385159906653
Penalizacion total:  0.7615713707288134
semilla:  9
X*:  [-1.61160521  1.47299928  1.99962     0.76151204  1.02843741]
f(x*):  0.02429206473047325
h1:  0.4030624584828697
h2:  0.9703985057952211
h3:  0.010230105590064653
Penalizacion total:  1.3836910698681555
semilla:  10
X*:  [-0.72798918 -0.88898299 -2.23281105 -0.21626053 -1.91538066]
f(x*):  0.5496062650977815
h1:  0.021155885148644415
h2:  0.08617514554108685
h3:  0.08836619646035704
Penalizacion total:  0.1956972271500883
semilla:  11
X*:  [-1.68740151  1.58694431 -1.85748899  0.6500327  -0.91825175]
f(x*):  0.05135704716015013
h1:  0.08171025153204603
h2:  0.036736733803417465
h3:  0.1919696962851889
Penalizacion total:  0.3104166816206524
semilla:  12
X*:  [-1.10587325  0.75286183 -2.60032986 -1.34575743  0.34740688]
f(x*):  0.40958170191216087
h1:  0.4832265713431898
h2:  0.3799378178658712
h3:  0.07428884071489761
Penalizacion total:  1.23778309116636
semilla:  13
X*:  [-1.62740291  1.49629655  1.8892176   1.13165702  0.52396729]
f(x*):  0.06848739106635772
h1:  0.011676067380923527
h2:  0.13792653965133939
h3:  0.03998408753711136
Penalizacion total:  0.18958669456937427
semilla:  14
X*:  [-1.20025757  1.22069145  2.40434384  0.91253328  0.65660711]
f(x*):  0.09289775396131926
h1:  0.02457497621754179
h2:  0.060917224111528334
h3:  1.0898242996104774
Penalizacion total:  1.2796603381410643
semilla:  15
X*:  [-1.87272358  1.7572268  -1.52718608  0.68537666 -0.78762453]
f(x*):  0.06634072526518459
h1:  0.01733052211818098
h2:  0.015485059794270839
h3:  0.1417711775579873
Penalizacion total:  0.1745867594704391
semilla:  16
X*:  [-1.46573877  1.2514973   1.88624539  0.38858217  1.35034086]
f(x*):  0.16274650369438953
h1:  0.7530261432039431
h2:  0.2629608687555969
h3:  0.18882673591670307
Penalizacion total:  1.204813747876243
semilla:  17
X*:  [-2.16591474  2.16890723  0.70995781 -0.42705783 -0.83231469]
f(x*):  0.30560372081006393
h1:  0.7745114545287972
h2:  0.23739990102402486
h3:  1.042173148857282
Penalizacion total:  2.0540845044101044
semilla:  18
X*:  [-1.44127331  1.16759568  2.27014166  0.82018698  0.83169134]
f(x*):  0.07383262985695109
h1:  0.041491275343537026
h2:  0.7601044528610554
h3:  0.4021525921379985
Penalizacion total:  1.203748320342591
semilla:  19
X*:  [-1.32090405  1.19584518 -2.11647753 -0.34538547  1.48883956]
f(x*):  0.13298214900880656
h1:  0.009755312902118618
h2:  0.04013835764557161
h3:  0.4054163267500994
Penalizacion total:  0.45530999729778965
semilla:  20
X*:  [-1.14994058  0.73166772 -2.611996    0.52447287 -0.97748272]
f(x*):  0.09702245146179202
h1:  0.08923167984414349
h2:  0.6522026847081952
h3:  0.12894997280866694
Penalizacion total:  1.1823803354923486
semilla:  21
X*:  [-1.84230433  1.70843985 -1.60618687  0.59860989 -0.91294923]
f(x*):  0.05217339945513248
h1:  0.0844982995137773
h2:  0.011571465203596976
h3:  0.26640053970417377
Penalizacion total:  0.36247030442154804
semilla:  22
X*:  [-1.46922128  1.15355394 -2.24269025  0.97776228 -0.56179149]
f(x*):  0.12395122983660173
h1:  0.209413810056164
h2:  0.15942848632476414
h3:  0.6364586057863066
Penalizacion total:  1.0053009021672348
semilla:  23
X*:  [-0.71978693 -0.83306753  2.74925171 -1.0023356   0.44554188]
f(x*):  0.4789267070772922
h1:  0.026336090606772444
h2:  0.05739991390703025
h3:  0.0489331287507887
Penalizacion total:  0.5819208399529728
semilla:  24
X*:  [-1.64811027  1.46878947 -1.22875462  1.2980877  -0.37496525]
f(x*):  2.288257946935232e-05
h1:  1.790921483074225
h2:  0.6289070524779194
h3:  0.30802636533481387
Penalizacion total:  2.7278549008869586
semilla:  25
X*:  [-0.9302266  -0.88487237 -2.5454616  -1.03537448 -0.6941869 ]
f(x*):  0.2218070503575623
h1:  0.3184088575101178
h2:  1.3413083822535667
h3:  0.49779937256648155
Penalizacion total:  2.402978208267789
semilla:  26
X*:  [-1.90564792  1.82030315  1.28867078  0.48166811  0.9594012 ]
f(x*):  0.04224763884539949
h1:  0.24187526459705744
h2:  0.03520665313989424
h3:  0.1112319384654219
Penalizacion total:  0.3883138562023736
semilla:  27
X*:  [-1.68882161  1.57765751  1.86748826 -0.69955835 -0.8589129 ]
f(x*):  0.04853900820826936
h1:  0.05574729286690783
h2:  0.058041567542041594
h3:  0.11007533150542947
Penalizacion total:  0.2238641919143789
semilla:  28
X*:  [-0.80965491 -1.00809997  2.87113815 -1.13446908  0.78920945]
f(x*):  0.12267959435200984
h1:  1.8251125616559882
h2:  1.5822743382870885
h3:  0.555259307303638
Penalizacion total:  4.533784360256801
semilla:  29
X*:  [-1.74028665  1.61739999  1.83921785  0.7183378   0.82570856]
f(x*):  0.04639211084257788
h1:  0.22510647311765553
h2:  0.009062604491027137
h3:  0.03953755744797682
Penalizacion total:  0.2737066350566595
semilla:  30
X*:  [-1.62693668  1.57554286  1.82818495  1.35419199  0.43338785]
f(x*):  0.06182176455247866
h1:  0.49317945249819317
h2:  0.054068005540112374
h3:  0.6046495530054701
Penalizacion total:  1.1518970110437756
Media: 0.139
Desviación Estandar: 0.142
Mejor: 0.000 	 Peor: 0.550
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}
</div>
 

